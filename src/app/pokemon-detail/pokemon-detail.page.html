<ion-content>
  <div
    class="menuNav"
    *ngIf="pokemon"
    [ngStyle]="{ 'background-color': getCardColor(pokemon) }"
  >
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" [ngStyle]="{ 'color': '#ffffff' }"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button
        fill="clear"
        size="small"
        (click)="toggleFavorite(pokemon.name); $event.stopPropagation()"
      >
        <ion-icon
          [name]="isFavorite(pokemon.name) ? 'heart' : 'heart-outline'"
          color="light"
          slot="icon-only"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </div>

  <div
    *ngIf="pokemon"
    class="detail-container"
    [ngStyle]="{ 'background-color': getCardColor(pokemon) }"
  >
    <div class="infos-div">
      <div>
        <h2>{{ pokemon.name | titlecase }}</h2>
      </div>

      <div class="abilities-wrapper">
        <div class="ability" *ngFor="let type of pokemon.types">
          {{ type.type.name | titlecase }}
        </div>
      </div>
    </div>
    <div class="pokemon-image-wrapper">
      <img
        [src]="pokemon.sprites.front_default"
        alt="{{ pokemon.name }}"
        class="pokemon-img-floating"
      />
    </div>

    <div class="info-card">
      <p><strong>Altura</strong> {{ pokemon.height / 10 }} m</p>
      <p><strong>Peso</strong> {{ pokemon.weight / 10 }} kg</p>
      <p><strong>ExperiÃªncia base</strong> {{ pokemon.base_experience }}</p>
      <div class="stat-bar">
        <strong>HP </strong>
        <span>{{ getStat('hp') }}</span>
        <div class="progress-container">
          <div
            class="progress-fill"
            [style.width.%]="getStat('hp')"
            [ngClass]="{ 'low': getStat('hp') < 50, 'high': getStat('hp') >= 50 }"
          ></div>
        </div>
      </div>

      <div class="stat-bar">
        <strong>Ataque </strong>
        <span>{{ getStat('attack') }}</span>
        <div class="progress-container">
          <div
            class="progress-fill"
            [style.width.%]="getStat('attack')"
            [ngClass]="{ 'low': getStat('attack') < 50, 'high': getStat('attack') >= 50 }"
          ></div>
        </div>
      </div>

      <div class="stat-bar">
        <strong>Defesa </strong>
        <span>{{ getStat('defense') }}</span>
        <div class="progress-container">
          <div
            class="progress-fill"
            [style.width.%]="getStat('defense')"
            [ngClass]="{ 'low': getStat('defense') < 50, 'high': getStat('defense') >= 50 }"
          ></div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
